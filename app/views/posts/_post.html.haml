%article{ itemscope: true, itemtype: "http://schema.org/BlogPosting" }
  %meta{ itemprop: "author", content: "Jimmy Cuadra" }
  %header
    %h1.post-title{ itemprop: "headline" }= link_to_unless_current post.title, post, title: post.title
    %data{ itemprop: "datePublished", value: post.created_at.strftime("%Y-%m-%d") }= post.created_at.strftime("%B %d, %Y")
    - if admin?
      \ -
      = link_to "Edit post", [:edit, post]
      \ -
      = link_to "Delete post", post, method: :delete, confirm: "Are you sure you want to delete this post?"
  .social
    .g-plusone{ data: { size: "medium", href: post_url(post) } }
    %a.twitter-share-button{ href: "https://twitter.com/share", data: { url: post_url(post), text: post.title, count: "horizontal", via: "jimmycuadra" } } Tweet
  - unless post.published
    .unpublished This post is currently unpublished.
  - if post.youtube_id.present? && params[:action] == "show"
    %object{ width: "640", height: "385", itemprop: "video", itemscope: true, itemtype: "http://schema.org/VideoObject" }
      %meta{ itemprop: "embedURL", content: "http://www.youtube.com/v/#{post.youtube_id}?fs=1&amp;hl=en_US&amp;rel=0" }
      %meta{ itemprop: "width", content: 640 }
      %meta{ itemprop: "height", content: 385 }
      %param{ name: "movie", value: "http://www.youtube.com/v/#{post.youtube_id}?fs=1&amp;hl=en_US&amp;rel=0" }
      %param{ name: "allowFullScreen", value: "true" }
      %param{ name: "allowscriptaccess", value: "always" }
      %embed{ src: "http://www.youtube.com/v/#{post.youtube_id}?fs=1&amp;hl=en_US&amp;rel=0", type: "application/x-shockwave-flash", allowcriptaccess: "always", allowfullscreen: "true", width: "640", height: "385" }
  - elsif post.youtube_id.present?
    %p= link_to "Watch the screencast", post
  ~ markdown post.body
  %footer
    - unless params[:action] == "show"
      %p= link_to pluralize(post.comments.count, 'comment'), post, title: "Comments on #{post.title}", itemprop: "discussionUrl"
    - unless post.tags.empty?
      %p
        This post was tagged with #{post.tags.map { |tag| link_to tag.name, tag_path(tag), title: "Writing tagged with #{tag.name}", itemprop: "keywords" }.to_sentence.html_safe }.
      %p
        Find more content by #{link_to "browsing by tags", tags_path, title: "Browse writing by tags"}.

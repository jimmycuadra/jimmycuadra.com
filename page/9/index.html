<!DOCTYPE html>
<html>
  <head>
    <title>
      
      Jimmy Cuadra
    </title>
    <link href="/stylesheets/application-58ac5912.css" rel="stylesheet" type="text/css" />
    <link href='http://feeds.feedburner.com/jimmycuadra' rel='alternate' title='RSS' type='application/rss+xml'>
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-5500916-1');ga('send', 'pageview');</script>
  </head>
  <body>
    <header class='site-header'>
      <div class='bucket'>
        <a class='title-link' href='/' title='Jimmy Cuadra'>
          <img width="75" height="75" alt="Jimmy Cuadra" class="logo" src="/images/logo-3e3e6b15.png" />
          <hgroup>
            <h1 class='main-title'>I'm Jimmy Cuadra.</h1>
            <p>I write about programming and open source software.</p>
          </hgroup>
          <div class='clear'></div>
        </a>
      </div>
    </header>
    <nav>
      <div class='bucket'>
        <ul>
          <li><a title="Writing" href="/">Writing</a></li>
          <li><a class="sub-nav" title="Writing by tags" href="/tags/">by tags</a></li>
          <li><a title="Jimmy Cuadra's Résumé" href="/resume/">Résumé</a></li>
        </ul>
      </div>
    </nav>
    <div class='content'>
      <div class='bucket'>
        <article itemscope itemtype='http://schema.org/BlogPosting'>
          <meta content='Jimmy Cuadra' itemprop='author'>
          <header>
            <h1 class='post-title' itemprop='headline'><a title="Self in Ruby" href="/posts/self-in-ruby/">Self in Ruby</a></h1>
            <data itemprop='datePublished' value='2011-02-02'>February 02, 2011</data>
          </header>
          <div class='social'>
            <div class='g-plus' data-action='share' data-annotation='bubble' data-href='/posts/self-in-ruby/'></div>
            <a class='twitter-share-button' data-count='horizontal' data-text='Self in Ruby' data-url='/posts/self-in-ruby/' data-via='jimmycuadra' href='https://twitter.com/share'>Tweet</a>
          </div>
          <p>The keyword <code>self</code> in Ruby gives you access to the current object – the object that is receiving the current message. To explain: a method call in Ruby is actually the sending of a message to a receiver. When you write <code>obj.meth</code>, you're sending the <code>meth</code> message to the object <code>obj</code>. <code>obj</code> will respond to <code>meth</code> if there is a method body defined for it. And inside that method body, <code>self</code> refers to <code>obj</code>. When I started with Ruby, I learned this pretty quickly, but it wasn't totally apparent when you might actually need to use <code>self</code>. I will outline the two most common use cases I've found for it.</p>
          
          <h2 id="class-methods">Class methods</h2>
          
          <p>The first usage I ran into was to define class methods. Inside a class, the <code>def</code> keyword will create a new instance method, when used without an explicit receiver.</p>
          
          <pre><code class="language-ruby">class Post&#x000A;  attr_writer :title&#x000A;&#x000A;  def print_title&#x000A;    puts "The title of this post is #{@title}"&#x000A;  end&#x000A;end&#x000A;&#x000A;pst = Post.new&#x000A;pst.title = "Green Beans"&#x000A;pst.print_title&#x000A;# "The title of this post is Green Beans"&#x000A;</code></pre>
          
          <p>In the context of a class, <code>self</code> refers to the current class, which is simply an instance of the class <code>Class</code>. Defining a method on <code>self</code> creates a class method.</p>
          
          <pre><code class="language-ruby">class Post&#x000A;  def self.print_author&#x000A;    puts "The author of all posts is Jimmy"&#x000A;  end&#x000A;end&#x000A;&#x000A;Post.print_author&#x000A;# "The author of all posts is Jimmy"&#x000A;</code></pre>
          
          <p>Another more advanced way to do this is to define a method inside the <code>Class</code> instance itself. This is referred to as the eigenclass or the singleton class and it uses the <code>self</code> keyword to open a new context where the <code>Class</code> instance is held in <code>self</code>.</p>
          
          <pre><code class="language-ruby">class Post&#x000A;  class &lt;&lt; self&#x000A;    def print_author&#x000A;      puts "The author of all posts is Jimmy"&#x000A;    end&#x000A;  end&#x000A;end&#x000A;&#x000A;Post.print_author&#x000A;# "The author of all posts is Jimmy"&#x000A;</code></pre>
          
          <h2 id="disambiguation">Disambiguation</h2>
          
          <p>When you call a method without an explicit receiving object, the method is implicitly called on <code>self</code>. So if <code>self</code> is assumed for us, why do we ever need to use <code>self.meth</code> outside of a class method definition? As it turns out, it may not always be clear which method you're trying to call. Consider this example:</p>
          
          <pre><code class="language-ruby">class Post&#x000A;  attr_writer :title&#x000A;&#x000A;  def self.author&#x000A;    "Jimmy"&#x000A;  end&#x000A;&#x000A;  def full_title&#x000A;    "#{@title} by #{class.author}"&#x000A;  end&#x000A;end&#x000A;&#x000A;pst = Post.new&#x000A;pst.title = "Delicious Ham"&#x000A;puts pst.full_title&#x000A;</code></pre>
          
          <p>When we call <code>full_title</code>, we get a syntax error because <code>class.author</code> in the method body attempts to use the <code>class</code> keyword instead of the <code>class</code> method on the <code>pst</code> object, which is what we want – the object's class. If we use <code>self.class.author</code> instead, Ruby knows that we want the <code>class</code> method of <code>pst</code>, and we get the result we expect.</p>
          
          <p>Another time when <code>self</code> is needed for disambiguation is when assigning a value to one of the object's attributes. Here is a contrived example:</p>
          
          <pre><code class="language-ruby">class Post&#x000A;  attr_accessor :title&#x000A;&#x000A;  def replace_title(new_title)&#x000A;    title = new_title&#x000A;  end&#x000A;&#x000A;  def print_title&#x000A;    puts title&#x000A;  end&#x000A;end&#x000A;&#x000A;pst = Post.new&#x000A;pst.title = "Cream of Broccoli"&#x000A;pst.replace_title("Cream of Spinach")&#x000A;pst.print_title&#x000A;# "Cream of Broccoli"&#x000A;</code></pre>
          
          <p>Even though we replaced the title of the post with "Cream of Spinach," it remained set to "Cream of Broccoli" and that's what we see when calling <code>print_title</code>. This is because the assignment inside <code>replace_title</code> is simply assigning to a local variable called <code>title</code> which is not used for anything. If we change that line to <code>self.title = new_title</code>, then the call to <code>print_title</code> at the end will give us "Cream of Spinach" as we were expecting. Note that it is not necessary to use <code>self.title</code> explicitly when using the accessor method inside the definition of <code>print_title</code>, because Ruby will see that there is no local variable with that name and then send <code>self</code> the message <code>title</code>. In the case of assignment, Ruby must assume you want to assign to a local variable, because if it sends the <code>title=</code> message to <code>self</code>, you are left with no way to set a local variable.</p>
          
          <p>If you have more examples of when you might use <code>self</code>, feel free to leave a comment.</p>
          <footer>
            <p>
              This post was tagged with <a title="Writing tagged with ruby" itemprop="keywords" href="/posts/tags/ruby/">ruby</a>.
            </p>
            <p>
              Find more content by <a title="Browse writing by tags" href="/tags/">browsing by tags</a>.
            </p>
          </footer>
        </article>
        <article itemscope itemtype='http://schema.org/BlogPosting'>
          <meta content='Jimmy Cuadra' itemprop='author'>
          <header>
            <h1 class='post-title' itemprop='headline'><a title="The new jimmycuadra.com" href="/posts/the-new-jimmycuadracom/">The new jimmycuadra.com</a></h1>
            <data itemprop='datePublished' value='2011-01-28'>January 28, 2011</data>
          </header>
          <div class='social'>
            <div class='g-plus' data-action='share' data-annotation='bubble' data-href='/posts/the-new-jimmycuadracom/'></div>
            <a class='twitter-share-button' data-count='horizontal' data-text='The new jimmycuadra.com' data-url='/posts/the-new-jimmycuadracom/' data-via='jimmycuadra' href='https://twitter.com/share'>Tweet</a>
          </div>
          <p>Today I've launched a completely rewritten version of jimmycuadra.com. When I originally built the site, my intent was on building a freelance business. After a few years, it's become obvious that my goals have changed. I've been working for a company full time and have decided that I greatly prefer the security of a full time job to all the hassles freelancing would involve. I don't want to deal with clients, I don't want to manage taxes and health insurance, I don't want to worry about tracking hours and billing. I just want to program.</p>
          
          <p>With those new directions in mind, it was time to revamp my site with a simpler, streamlined focus. All I really need is a blog, a list of my major projects, and a brief bio. And that's exactly what the new jimmycuadra.com is.</p>
          
          <p>The site is again built with <a href="http://www.rubyonrails.org/">Ruby on Rails</a> but with another year's worth of experience working with Ruby and Rails. This time around it is being hosted on <a href="http://heroku.com/">Heroku</a>, where I am in the process of moving all my sites. The code for the site is now <a href="https://github.com/jimmycuadra/jimmycuadra.com">open sourced on GitHub</a> along with my other projects.</p>
          
          <p>I'd been hesitant to add new content to the site, knowing that this new version was imminent. Now that it's finished, I hope do more writing and screencasting.</p>
          
          <p>I've also decided that, contrary to my original goal of ultimate accessibility, I am no longer supporting any version of Internet Explorer on any of my sites. I don't even check them in IE. I'm sure they're completely broken, and I don't care. My focus in web development has narrowed greatly, and anyone using IE is not my audience. I definitely wouldn't have this attitude working on a business project where cross-browser compatibility was important to the stakeholders, but on my own projects, spending any time on IE at all is literally a waste of time.</p>
          
          <p>The new site is all about slimming things down: no unnecessary pages, a small number of content tags, integrated blog posts and screencasts, a simple design, easy deployment, one rendering engine to rule them all (<a href="http://webkit.org/">Webkit</a>) and motivation for myself to provider better, more frequent content.</p>
          
          <p>Here's to a new era.</p>
          <footer>
            <p>
              This post was tagged with <a title="Writing tagged with launch" itemprop="keywords" href="/posts/tags/launch/">launch</a>.
            </p>
            <p>
              Find more content by <a title="Browse writing by tags" href="/tags/">browsing by tags</a>.
            </p>
          </footer>
        </article>
        <article itemscope itemtype='http://schema.org/BlogPosting'>
          <meta content='Jimmy Cuadra' itemprop='author'>
          <header>
            <h1 class='post-title' itemprop='headline'><a title="to_lang: A Ruby library for translating strings" href="/posts/to-lang-a-ruby-library-for-translating-strings/">to_lang: A Ruby library for translating strings</a></h1>
            <data itemprop='datePublished' value='2010-12-27'>December 27, 2010</data>
          </header>
          <div class='social'>
            <div class='g-plus' data-action='share' data-annotation='bubble' data-href='/posts/to-lang-a-ruby-library-for-translating-strings/'></div>
            <a class='twitter-share-button' data-count='horizontal' data-text='to_lang: A Ruby library for translating strings' data-url='/posts/to-lang-a-ruby-library-for-translating-strings/' data-via='jimmycuadra' href='https://twitter.com/share'>Tweet</a>
          </div>
          <p><strong>to_lang</strong> is a project I've been working on that is now ready for an official introduction. It's a Ruby library for translating strings, backed by the Google Translate API. <strong>to_lang</strong> is unique in that it allows you to call translation methods directly on strings.</p>
          
          <p>The first thing to do is require the library and call the <code>start</code> method:</p>
          
          <pre><code class="language-ruby">require 'to_lang'&#x000A;ToLang.start('YOUR_GOOGLE_TRANSLATE_API_KEY')&#x000A;</code></pre>
          
          <p>Voilà. Strings now have access to a bunch of dynamic translation methods.</p>
          
          <pre><code class="language-ruby">"Very cool gem!".to_spanish&#x000A;# =&gt; "Muy fresco joya!"&#x000A;</code></pre>
          
          <p>You can use similar <code>to_language</code> methods for any of the 53 supported languages. Google Translate attempts to detect the language of the string you're translating, but sometimes the source language is ambiguous, and Google Translate may guess wrong. In this case, you can manually specify the source language by appending <code>_from_language</code> to the end of the method.</p>
          
          <pre><code class="language-ruby">"a pie".to_spanish&#x000A;# =&gt; "a pie"&#x000A;"a pie".to_spanish_from_english&#x000A;# =&gt; "un pastel"&#x000A;</code></pre>
          
          <p>All the dynamic methods are syntactic sugar for a more general method, <code>translate</code>, which is also made available to strings. You can use this as well, as it may make programmatic translations easier.</p>
          
          <pre><code class="language-ruby">"hello world".translate('es')&#x000A;# =&gt; "hola mundo"&#x000A;"a pie".translate('es', :from =&gt; 'en')&#x000A;# =&gt; "un pastel"&#x000A;</code></pre>
          
          <p>Give it a try! I'd love to get feedback on it if you do.</p>
          
          <ul>
            <li>Install with <code>gem install to_lang</code></li>
            <li><a href="http://rubydoc.info/github/jimmycuadra/to_lang/master/frames">API documentation</a></li>
            <li><a href="https://github.com/jimmycuadra/to_lang">Source code on GitHub</a></li>
          </ul>
          <footer>
            <p>
              This post was tagged with <a title="Writing tagged with ruby" itemprop="keywords" href="/posts/tags/ruby/">ruby</a> and <a title="Writing tagged with to_lang" itemprop="keywords" href="/posts/tags/to_lang/">to_lang</a>.
            </p>
            <p>
              Find more content by <a title="Browse writing by tags" href="/tags/">browsing by tags</a>.
            </p>
          </footer>
        </article>
        <p class='pagination'>
          <span><a rel="prev" href="/page/8/">← Previous</a></span>
          <span>Page 9</span>
          <span><a rel="next" href="/page/10/">Next →</a></span>
        </p>
      </div>
    </div>
    <footer class='site-footer'>
      <div class='bucket'>
        <p>Logo by <a href="http://stephanielucido.com/" title="Stephanie Lucido">Stephanie Lucido</a>.</p>
        <small>
          &copy; 2015 Jimmy Cuadra. All rights reserved.
        </small>
      </div>
    </footer>
    <script src="/javascripts/application-f844c8db.js" type="text/javascript"></script>
    <script>
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/platform.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    (function(d, t) {
      var e = d.createElement(t), s = d.getElementsByTagName(t)[0];
      e.type = 'text/javascript'; e.async = true; e.src = '//platform.twitter.com/widgets.js';
      s.parentNode.insertBefore(e, s);
    })(document, 'script');
    </script>
  </body>
</html>

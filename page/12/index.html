<!DOCTYPE html>
<html>
  <head>
    <title>
      
      Jimmy Cuadra
    </title>
    <link href="/stylesheets/application-58ac5912.css" rel="stylesheet" />
    <link href='http://feeds.feedburner.com/jimmycuadra' rel='alternate' title='RSS' type='application/rss+xml'>
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-5500916-1');ga('send', 'pageview');</script>
  </head>
  <body>
    <header class='site-header'>
      <div class='bucket'>
        <a class='title-link' href='/' title='Jimmy Cuadra'>
          <img width="75" height="75" alt="Jimmy Cuadra" class="logo" src="/images/logo-3e3e6b15.png" />
          <hgroup>
            <h1 class='main-title'>I'm Jimmy Cuadra.</h1>
            <p>I write about programming and open source software.</p>
          </hgroup>
          <div class='clear'></div>
        </a>
      </div>
    </header>
    <nav>
      <div class='bucket'>
        <ul>
          <li><a title="Writing" href="/">Writing</a></li>
          <li><a class="sub-nav" title="Writing by tags" href="/tags/">by tags</a></li>
          <li><a title="Jimmy Cuadra's Résumé" href="/resume/">Résumé</a></li>
        </ul>
      </div>
    </nav>
    <div class='content'>
      <div class='bucket'>
        <article itemscope itemtype='http://schema.org/BlogPosting'>
          <meta content='Jimmy Cuadra' itemprop='author'>
          <header>
            <h1 class='post-title' itemprop='headline'><a title="Checking for one key among several in a Ruby hash" href="/posts/checking-for-one-key-among-several-in-a-ruby-hash/">Checking for one key among several in a Ruby hash</a></h1>
            <data itemprop='datePublished' value='2010-02-07'>February 07, 2010</data>
          </header>
          <div class='social'>
            <div class='g-plus' data-action='share' data-annotation='bubble' data-href='/posts/checking-for-one-key-among-several-in-a-ruby-hash/'></div>
            <a class='twitter-share-button' data-count='horizontal' data-text='Checking for one key among several in a Ruby hash' data-url='/posts/checking-for-one-key-among-several-in-a-ruby-hash/' data-via='jimmycuadra' href='https://twitter.com/share'>Tweet</a>
          </div>
          <p>I've been hard at work on More Things Need To this weekend and have learned lots of things in the process. One of these things was a handy bit of Ruby that seemed worth sharing for other newcomers.</p>
          
          <p>What I wanted to do was find out if any key from a list of keys existed in a hash. For example, given a hash <code>animals</code>, I'd like to know if it contains at least one key among the keys <code>horse</code>, <code>frog</code>, and <code>cow</code>. Checking for a single key is easy:</p>
          
          <pre><code class="language-ruby">animals.key?('horse')&#x000A;</code></pre>
          
          <p>But what about when we want to check for all three of those animals? Well, we could just do one after another:</p>
          
          <pre><code class="language-ruby">animals.key?('horse') || animals.key?('frog') || animals.key?('cow')&#x000A;</code></pre>
          
          <p>But that can get cumbersome very quickly. There are a few cleaner ways to do this for multiple keys, but the method I ended up using takes advantage of the fact that the <code>Array</code> class in Ruby includes the <code>Enumerable</code> module, which has a handy method called <a href="http://ruby-doc.org/core/classes/Enumerable.html#M003132">any?</a>. This method takes a block and will return true if any invocations of the block return a "truthy" value. So, here is the solution:</p>
          
          <pre><code class="language-ruby">['horse', 'frog', 'cow'].any? do |key|&#x000A;  animals.key?(key)&#x000A;end&#x000A;</code></pre>
          
          <p>So what is happening here? First, we're defining an array that contains all the keys we want to check for. Then we call the <code>any?</code> method on that array and pass it a block. Inside the block, we check if the key in the current invocation exists in <code>animals</code>. If an existing key is ever found, the entire call will return true. This removes some repetition and makes the code easier to read.</p>
          
          <p>Note that you can also find out if the hash contains all of the keys rather than just one by using the <a href="http://ruby-doc.org/core/classes/Enumerable.html#M003131">all?</a> method instead of <code>any?</code>.</p>
          <footer>
            <p>
              This post was tagged with <a title="Writing tagged with ruby" itemprop="keywords" href="/posts/tags/ruby/">ruby</a>.
            </p>
            <p>
              Find more content by <a title="Browse writing by tags" href="/tags/">browsing by tags</a>.
            </p>
          </footer>
        </article>
        <article itemscope itemtype='http://schema.org/BlogPosting'>
          <meta content='Jimmy Cuadra' itemprop='author'>
          <header>
            <h1 class='post-title' itemprop='headline'><a title="Do websites need to look the same in every browser?" href="/posts/do-websites-need-to-look-the-same-in-every-browser/">Do websites need to look the same in every browser?</a></h1>
            <data itemprop='datePublished' value='2010-02-04'>February 04, 2010</data>
          </header>
          <div class='social'>
            <div class='g-plus' data-action='share' data-annotation='bubble' data-href='/posts/do-websites-need-to-look-the-same-in-every-browser/'></div>
            <a class='twitter-share-button' data-count='horizontal' data-text='Do websites need to look the same in every browser?' data-url='/posts/do-websites-need-to-look-the-same-in-every-browser/' data-via='jimmycuadra' href='https://twitter.com/share'>Tweet</a>
          </div>
          <p>There are numerous awesome new features introduced in HTML5 and CSS 3, but neither specification is finalized and browser support for them is still pretty unreliable. After getting a taste of what these new technologies can do, it can be hard to resist using them and to wait for better browser support. My position for a long time has been that, although it's frustrating as a developer, it's best to create things for the lowest common denominator and not use features that don't have reliable support across browsers. But my thoughts on the subject have been changing recently.</p>
          
          <p>One of the catalysts for this change was a spectacular quote from <a href="http://www.crockford.com/">Douglas Crockford</a> that I came across:</p>
          
          <blockquote>
            <p>If a web browser is defective, causing errors in the display or performance of the page, should the page developer struggle to hide the browser's defects, or should the defects be revealed in hope of creating market pressure to force the browser maker to make good? By which approach is humanity better served?</p>
          </blockquote>
          
          <p>The debate as to whether or not a developer should support bad, buggy browsers (henceforth referred to as IE) is not a new one. Most often it is simply not a choice for the developer. Most businesses will require support for IE due to its sheer market share and the monetary consequences of not doing so. Even on a project without requirements dictated by an employer, choosing not to support IE puts you at a disadvantage, because chances are there are other developers out there making similar products that <em>do</em> support IE. And when faced with a choice, which are clients going to choose?</p>
          
          <p>Because of these reasons, I've always erred on the side of caution and supported IE. But reading that insightful quote from Douglas Crockford reinvigorated the debate in my mind. I started to rethink how important supporting IE really is and how to find a better compromise in regard to feature support in browsers. There's an emerging school of thought that we should rid ourselves of the preconception that a website should look exactly the same in every browser. I've seen this new attitude come up in several different places recently.</p>
          
          <p>So, does a website need to look the same in every browser? The short answer: <a href="http://dowebsitesneedtolookexactlythesameineverybrowser.com/">no</a>.</p>
          
          <p>My new attitude is to think of browser support with a progressive enhancement approach. I can dramatically improve the look of a site with new CSS 3 effects such as <code>box-shadow</code>. But IE doesn't support it. Should I forego its use? Or use some JavaScript to recreate the effect? Neither! I should use it. Users with browsers that support it will see the fancy version, and IE users will see something more basic, but still fully functional. Since they have not seen it any other way, they're not disappointed, and nothing looks wrong or broken. They're none the wiser.</p>
          
          <p>I feel that this approach is a good compromise on what Douglas Crockford's quote suggests. Instead of crying, "IE be damned!" and allowing it to break, it inverts the sentiment to use a positive context. Instead of punishing IE users for using an outdated browser, it continues to present the baseline for them, and rewards users of modern browsers with extra sparkle. This encourages the use of modern browsers just like the "let IE break" attitude, but keeps everything perfectly useable and presentable to the least common denominator.</p>
          <footer>
            <p>
              This post was tagged with <a title="Writing tagged with browsers" itemprop="keywords" href="/posts/tags/browsers/">browsers</a>.
            </p>
            <p>
              Find more content by <a title="Browse writing by tags" href="/tags/">browsing by tags</a>.
            </p>
          </footer>
        </article>
        <article itemscope itemtype='http://schema.org/BlogPosting'>
          <meta content='Jimmy Cuadra' itemprop='author'>
          <header>
            <h1 class='post-title' itemprop='headline'><a title="Understanding jQuery 1.4's $.proxy() method" href="/posts/understanding-jquery-14s-proxy-method/">Understanding jQuery 1.4's $.proxy() method</a></h1>
            <data itemprop='datePublished' value='2010-01-15'>January 15, 2010</data>
          </header>
          <div class='social'>
            <div class='g-plus' data-action='share' data-annotation='bubble' data-href='/posts/understanding-jquery-14s-proxy-method/'></div>
            <a class='twitter-share-button' data-count='horizontal' data-text="Understanding jQuery 1.4's $.proxy() method" data-url='/posts/understanding-jquery-14s-proxy-method/' data-via='jimmycuadra' href='https://twitter.com/share'>Tweet</a>
          </div>
          <p>No sooner than I wrote about how to control a JavaScript function's context with the <a href="http://www.prototypejs.org/">Prototype</a> <code>Function.prototype.bind</code>, <a href="http://jquery.com/">jQuery 1.4</a> is released and one of its new tricks is <code>jQuery.proxy</code>, which we can use for exactly the same purpose.</p>
          
          <p>To refresh you, the problem that needed solving was how to preserve a reference to the calling object when the value of <code>this</code> is changed. Consider the following:</p>
          
          <pre><code class="language-javascript">MyModule = function() {&#x000A;  this.$div = $('#testdiv');&#x000A;  this.myString = "Hi! I'm an object property!";&#x000A;  &#x000A;  this.$div.click(this.handleClick);&#x000A;};&#x000A;&#x000A;MyModule.prototype.handleClick = function() {&#x000A;  console.log(this.myString); // undefined&#x000A;};&#x000A;&#x000A;var m = new MyModule();&#x000A;</code></pre>
          
          <p>When you click on the div, we are given <code>undefined</code>, because <code>this</code> now refers to the DOM element that triggered the event and not the instance of <code>MyModule</code> we've stored in the variable <code>m</code>. The element does not have a <code>myString</code> property, and hence, it is undefined. So how do we access the <code>myString</code> we want? The solution I wrote about previously was to use <code>Function.prototype.bind</code> from the Prototype library, which allows us to control what <code>this</code> will refer to inside the function we're calling. But now in version 1.4 of jQuery, we can handle this situation with the new <code>jQuery.proxy</code> method. The method has two signatures:</p>
          
          <pre><code class="language-javascript">jQuery.proxy( function, scope )&#x000A;jQuery.proxy( scope, name )&#x000A;</code></pre>
          
          <p>In the first form, the <code>function</code> argument is the function we're calling, and the <code>scope</code> argument sets the context the function should be called in. In the second form, the scope comes first, and the <code>name</code> argument is a string that gives the name of the function we're calling. Note that the function provided in <code>name</code> should be a property of whatever object we're using as the scope. Let's look at an example to make this more clear.</p>
          
          <pre><code class="language-javascript">MyModule = function() {&#x000A;  this.$div = $('#testdiv');&#x000A;  this.myString = "Hi! I'm an object property!";&#x000A;  &#x000A;  this.$div.click($.proxy(this.handleClick, this));&#x000A;};&#x000A;&#x000A;MyModule.prototype.handleClick = function() {&#x000A;  console.log(this.myString); // Hi! I'm an object property!&#x000A;};&#x000A;&#x000A;var m = new MyModule();&#x000A;</code></pre>
          
          <p>Now when we click on the div, we see the result we want, because <code>this</code> is now bound to our <code>m</code> object, which is an instance of <code>MyModule</code>. This uses <code>jQuery.proxy</code>'s first signature. We could achieve exactly the same effect using the second signature by using this line instead:</p>
          
          <pre><code class="language-javascript">this.$div.click($.proxy(this, "handleClick"));&#x000A;</code></pre>
          
          <p>The small "gotcha" that remains is how to access the DOM element that triggered the event, now that we've changed the value of <code>this</code> within our function. The good news is that, like before, all event handling functions are passed an <code>event</code> object with details about the event that occurred. Within that event object is a property called <code>currentTarget</code>, which holds exactly what we're looking for: the DOM element that triggered the event. Here is an example of how to access it:</p>
          
          <pre><code class="language-javascript">MyModule.prototype.handleClick = function(event) {&#x000A;  console.log(this.myString); // Hi! I'm an object property!&#x000A;  console.log(event.currentTarget); // &lt;div id="testdiv"&gt;&#x000A;};&#x000A;</code></pre>
          
          <p>Thanks to <code>jQuery.proxy</code>, we now have the ability to control function scope with jQuery alone. To read more about all the new features in jQuery 1.4, check out John Resig's overview on <a href="http://jquery14.com/day-01/jquery-14">The 14 Days of jQuery</a>.</p>
          <footer>
            <p>
              This post was tagged with <a title="Writing tagged with javascript" itemprop="keywords" href="/posts/tags/javascript/">javascript</a> and <a title="Writing tagged with jquery" itemprop="keywords" href="/posts/tags/jquery/">jquery</a>.
            </p>
            <p>
              Find more content by <a title="Browse writing by tags" href="/tags/">browsing by tags</a>.
            </p>
          </footer>
        </article>
        <p class='pagination'>
          <span><a rel="prev" href="/page/11/">← Previous</a></span>
          <span>Page 12</span>
          <span><a rel="next" href="/page/13/">Next →</a></span>
        </p>
      </div>
    </div>
    <footer class='site-footer'>
      <div class='bucket'>
        <p>Logo by <a href="http://stephanielucido.com/" title="Stephanie Lucido">Stephanie Lucido</a>.</p>
        <small>
          &copy; 2015 Jimmy Cuadra. All rights reserved.
        </small>
      </div>
    </footer>
    <script src="/javascripts/application-f844c8db.js"></script>
    <script>
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/platform.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    (function(d, t) {
      var e = d.createElement(t), s = d.getElementsByTagName(t)[0];
      e.type = 'text/javascript'; e.async = true; e.src = '//platform.twitter.com/widgets.js';
      s.parentNode.insertBefore(e, s);
    })(document, 'script');
    </script>
  </body>
</html>

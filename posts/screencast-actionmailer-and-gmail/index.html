<!DOCTYPE html>
<html>
  <head>
    <title>
      Screencast: ActionMailer and Gmail |
      Jimmy Cuadra
    </title>
    <link href="/stylesheets/application-58ac5912.css" rel="stylesheet" />
    <link href='http://feeds.feedburner.com/jimmycuadra' rel='alternate' title='RSS' type='application/rss+xml'>
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-5500916-1');ga('send', 'pageview');</script>
  </head>
  <body>
    <header class='site-header'>
      <div class='bucket'>
        <a class='title-link' href='/' title='Jimmy Cuadra'>
          <img width="75" height="75" alt="Jimmy Cuadra" class="logo" src="/images/logo-3e3e6b15.png" />
          <hgroup>
            <h1 class='main-title'>I'm Jimmy Cuadra.</h1>
            <p>I write about programming and open source software.</p>
          </hgroup>
          <div class='clear'></div>
        </a>
      </div>
    </header>
    <nav>
      <div class='bucket'>
        <ul>
          <li><a title="Writing" href="/">Writing</a></li>
          <li><a class="sub-nav" title="Writing by tags" href="/tags/">by tags</a></li>
          <li><a title="Jimmy Cuadra's Résumé" href="/resume/">Résumé</a></li>
        </ul>
      </div>
    </nav>
    <div class='content'>
      <div class='bucket'>
        <article itemscope itemtype='http://schema.org/BlogPosting'>
          <meta content='Jimmy Cuadra' itemprop='author'>
          <header>
            <h1 class='post-title' itemprop='headline'><a title="Screencast: ActionMailer and Gmail" href="/posts/screencast-actionmailer-and-gmail/">Screencast: ActionMailer and Gmail</a></h1>
            <data itemprop='datePublished' value='2009-09-24'>September 24, 2009</data>
          </header>
          <div class='social'>
            <div class='g-plus' data-action='share' data-annotation='bubble' data-href='/posts/screencast-actionmailer-and-gmail/'></div>
            <a class='twitter-share-button' data-count='horizontal' data-text='Screencast: ActionMailer and Gmail' data-url='/posts/screencast-actionmailer-and-gmail/' data-via='jimmycuadra' href='https://twitter.com/share'>Tweet</a>
          </div>
          <object height='385' itemprop='video' itemscope itemtype='http://schema.org/VideoObject' width='640'>
            <meta content='http://www.youtube.com/v/iJZ8w5o_TkE?fs=1&amp;amp;hl=en_US&amp;amp;rel=0' itemprop='embedURL'>
            <meta content='640' itemprop='width'>
            <meta content='385' itemprop='height'>
            <param name='movie' value='http://www.youtube.com/v/iJZ8w5o_TkE?fs=1&amp;amp;hl=en_US&amp;amp;rel=0'>
            <param name='allowFullScreen' value='true'>
            <param name='allowscriptaccess' value='always'>
              <embed allowcriptaccess='always' allowfullscreen='true' height='385' src='http://www.youtube.com/v/iJZ8w5o_TkE?fs=1&amp;amp;hl=en_US&amp;amp;rel=0' type='application/x-shockwave-flash' width='640'>
            </param>
          </object>
          <p>This screencast shows how to set up a Ruby on Rails application to send email with ActionMailer and Gmail.</p>
          
          <p>Ruby 1.8.7 and Rails 2.2.1 or later versions are required to use TLS (required for Gmail SMTP) without a plugin. If you use older versions of either Ruby or Rails, try a plugin like <a href="https://github.com/collectiveidea/action_mailer_optional_tls/">action_mailer_optional_tls</a>.</p>
          
          <p>I've improved the quality of the video for this screencast. A high quality version is available on YouTube via the link above.</p>
          
          <p>I'd like to give a big thanks to <a href="http://nebyoolae.com/">Nebyoolae</a> for providing the intro sound!</p>
          
          <p>Here is the code from the screencast:</p>
          
          <pre><code class="language-ruby"># config/environments/development.rb&#x000A;&#x000A;config.action_mailer.delivery_method = :smtp&#x000A;config.action_mailer.smtp_settings = {&#x000A;  :enable_starttls_auto =&gt; true,&#x000A;  :address =&gt; 'smtp.gmail.com',&#x000A;  :port =&gt; 587,&#x000A;  :authentication =&gt; :plain,&#x000A;  :domain =&gt; 'myapp.com',&#x000A;  :user_name =&gt; 'username@gmail.com',&#x000A;  :password =&gt; 'password'&#x000A;}&#x000A;</code></pre>
          
          <pre><code class="language-ruby"># app/models/notifier.rb&#x000A;&#x000A;class Notifier &lt; ActionMailer::Base&#x000A;  def gmail_message&#x000A;    subject     'Message via Gmail'&#x000A;    recipients  'youremail@address.com'&#x000A;    from        'webmaster@address.com'&#x000A;    sent_on     Time.now&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <pre><code class="language-erb"># app/views/notifier/gmail_message.text.plain.erb&#x000A;&#x000A;Hello,&#x000A;&#x000A;You are receiving this email via Gmail!&#x000A;</code></pre>
          
          <pre><code class="language-html">&lt;!-- app/views/notifications/index.html.erb --&gt;&#x000A;&#x000A;&lt;a href="/notifications/create"&gt;Send&lt;/a&gt; a message via Gmail!&#x000A;</code></pre>
          
          <pre><code class="language-ruby"># app/controllers/notifications_controller.rb&#x000A;class NotificationsController &lt; ApplicationController&#x000A;  def index&#x000A;  end&#x000A;&#x000A;  def create&#x000A;    Notifier.deliver_gmail_message&#x000A;    flash[:notice] = 'Your message has been sent.'&#x000A;    redirect_to root_path&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <pre><code class="language-ruby"># config/routes.rb&#x000A;&#x000A;ActionController::Routing::Routes.draw do |map|&#x000A;  map.connect ':controller/:action/:id'&#x000A;  map.connect ':controller/:action/:id.:format'&#x000A;  map.root :controller =&gt; 'notifications', :action =&gt; 'index'&#x000A;end&#x000A;</code></pre>
          <footer>
            <p>
              This post was tagged with <a title="Writing tagged with ruby" itemprop="keywords" href="/posts/tags/ruby/">ruby</a>, <a title="Writing tagged with ruby on rails" itemprop="keywords" href="/posts/tags/ruby-on-rails/">ruby on rails</a>, and <a title="Writing tagged with screencast" itemprop="keywords" href="/posts/tags/screencast/">screencast</a>.
            </p>
            <p>
              Find more content by <a title="Browse writing by tags" href="/tags/">browsing by tags</a>.
            </p>
          </footer>
        </article>
      </div>
    </div>
    <footer class='site-footer'>
      <div class='bucket'>
        <p>Logo by <a href="http://stephanielucido.com/" title="Stephanie Lucido">Stephanie Lucido</a>.</p>
        <small>
          &copy; 2015 Jimmy Cuadra. All rights reserved.
        </small>
      </div>
    </footer>
    <script src="/javascripts/application-f844c8db.js"></script>
    <script>
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/platform.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    (function(d, t) {
      var e = d.createElement(t), s = d.getElementsByTagName(t)[0];
      e.type = 'text/javascript'; e.async = true; e.src = '//platform.twitter.com/widgets.js';
      s.parentNode.insertBefore(e, s);
    })(document, 'script');
    </script>
  </body>
</html>
